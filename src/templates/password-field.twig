{% do view.registerAssetBundle("Imarc\\Craft\\PasswordProtection\\AssetBundles\\PageProtectionCPSectionAsset") %}

{% import "_includes/forms" as forms %}

{% set entryPass = craft.passwordProtection.findPasswordProtectionByEntry(entry.entry) %}
{% set passwordProtectionEnabled = entryPass ? entryPass.passwordProtectionEnabled : false %}
{% set password = entryPass ? entryPass.password : '' %}

{{ forms.lightswitchField({
    label: 'Enable Password Protect'|t('password-protection'),
    id: 'imarc-enabled-password-protect',
    name: 'imarc.passwordProtectionEnabled',
    on: passwordProtectionEnabled})
}}

<div id="imarc-password-field" class="field" style="display: {{ passwordProtectionEnabled ? 'flex' : 'none' }}">
    <div class="heading">
        <label for="imarc.password">{{ 'Passphrase'|t('password-protection') }}</label>
    </div>
    <div class="input">
        <input type="text" class="text" name="imarc.password" value="{{ password }}" placeholder="{{ settings.defaultPassword }}">
    </div>
</div>